# Система управления рестораном

## Техническое задание

### Действия админа

- Добавление и изменения блюд и их количества на складе.
- Создание смен, запись официантов на смену.
- Изменение порядка и добавление столов.
- Просмотр аналитики

### Действия официантов

- Просмотр своих обязанностей
- Открытие, закрытие смен
- Принятие и управление заказами своих столов.

### Действия посетителей

- Бронь столов. Создается бронь на свободный стол и создается к ней чек. Цена высчитывается по количеству людей и столу, который бронируется.
- Отмена брони. Возможна только до ее начала. Удаляется чек и ставится статус.
- Создание заказа, по умолчанию статус составления, возможность добавлять блюда в заказ. После завершения статус меняется на pending, потом официант меняет его по выполнению.

## Авторизация

- Регистрация посетителей.
- Создание записей об админах и официантах, (нужен секретный код доступа, указывается в конфиге приложения).
- Авторизация посетителей по email и пароль, возможно 2fa. Стандартный логин. Создается refresh токен с ролью и id посетителя. Возвращается access токен с aud=роль и sub=id.
- Авторизация работников: вводится login и пароль (две отдельные ручки для админа и официанта). дальше все по классике, создаются такие же токены как у пользователя.

## Необходимая аналитика

- Список продаж блюд за определенный период.
- Список броней столов за определенный период.
- Список работы официантам за определенный период.
- Получение свободных столов на указанный период.
- Список занятости столов на определенную дату.

## Используемые технологии

### Backend

- Микросервисная архитектура на golang. Использование чистой архитектуры в каждом сервисе. Использование workspaces.
- REST API и gateway сервис для связи с клиентской частью.
- gRPC для синхронного взаимодействия сервисов.
- RabbitMQ для асинхронного взаимодействия сервисов.
- PostgreSQL в качестве единой базы данных для всех сервисов.
- Redis для хранения time sensitive данных, в частности токенов авторизации
